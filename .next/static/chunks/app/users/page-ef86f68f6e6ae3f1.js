(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{2516:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155),l=s(2115);let r=e=>{let{filters:t}=e,[s,r]=(0,l.useState)([]),[i,n]=(0,l.useState)(!0),[o,c]=(0,l.useState)({page:1,pages:1,total:0}),[d,x]=(0,l.useState)(t||{search:"",status:"all",subsTier:"all"}),u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all";try{n(!0);let l=new URLSearchParams({page:e.toString(),limit:"10",search:t,status:s,subsTier:a}),i=await fetch("/api/users?".concat(l)),o=await i.json();r(o.users),c(o.pagination)}catch(e){console.error("Error fetching users:",e),r([])}finally{n(!1)}};(0,l.useEffect)(()=>{u()},[]),(0,l.useEffect)(()=>{t&&(x(t),u(1,t.search,t.status,t.subsTier))},[t]);let h=e=>{u(e,d.search,d.status,d.subsTier)},g=e=>e?new Date(e).toLocaleDateString():"N/A";return i?(0,a.jsx)("div",{className:"bg-gradient-to-br from-gray-900/80 to-gray-900/40 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6",children:(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"shimmer h-16 rounded-xl"},t))})}):(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-900/80 to-gray-900/40 backdrop-blur-sm border border-gray-800/50 rounded-2xl overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-5 border-b border-gray-800/50",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Users List"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Total: ",o.total," users"]})]})})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-800/60",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Plan"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Join Date"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Last Active"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-800/50",children:s.map(e=>{var t,s,l,r,i,n;return(0,a.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-all duration-200",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:((null==(t=e.first_name)?void 0:t[0])||(null==(s=e.username)?void 0:s[0])||"?").toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-white",children:e.first_name&&e.last_name?"".concat(e.first_name," ").concat(e.last_name):e.username||"N/A"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-sm font-bold ".concat((e=>{switch(e){case"freemium":default:return"text-gray-400";case"basic":return"text-blue-400";case"professional":return"text-yellow-400";case"enterprise":return"text-purple-400"}})(e.subs_tier)),children:(null==(l=e.subs_tier)?void 0:l.charAt(0).toUpperCase())+(null==(r=e.subs_tier)?void 0:r.slice(1))||"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-bold rounded-lg ".concat((e=>{switch(e){case"active":return"text-green-400 bg-green-400/20";case"inactive":default:return"text-gray-400 bg-gray-400/20";case"suspended":return"text-red-400 bg-red-400/20"}})(e.subscription_status)),children:(null==(i=e.subscription_status)?void 0:i.charAt(0).toUpperCase())+(null==(n=e.subscription_status)?void 0:n.slice(1))||"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300 font-medium",children:g(e.created_at)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300 font-medium",children:(e=>{if(!e)return"Never";let t=new Date(e),s=Math.floor((new Date-t)/36e5);if(s<1)return"Just now";if(s<24)return"".concat(s,"h ago");let a=Math.floor(s/24);return a<7?"".concat(a,"d ago"):g(e)})(e.updated_at)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{className:"text-yellow-400 hover:text-yellow-300 font-semibold transition-colors",children:"Edit"}),(0,a.jsx)("button",{className:"text-red-400 hover:text-red-300 font-semibold transition-colors",children:"Delete"})]})})]},e.id)})})]})}),(0,a.jsxs)("div",{className:"px-6 py-5 border-t border-gray-800/50 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-400 font-medium",children:["Showing ",(0,a.jsxs)("span",{className:"text-white font-semibold",children:[(o.page-1)*10+1,"-",Math.min(10*o.page,o.total)]})," of ",(0,a.jsx)("span",{className:"text-white font-semibold",children:o.total})," users"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>h(o.page-1),disabled:o.page<=1,className:"px-4 py-2 bg-gray-800/60 text-white rounded-xl hover:bg-gray-700/60 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold",children:"Previous"}),[...Array(Math.min(5,o.pages))].map((e,t)=>{let s=t+1;return(0,a.jsx)("button",{onClick:()=>h(s),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat(o.page===s?"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black shadow-lg shadow-yellow-400/30":"bg-gray-800/60 text-white hover:bg-gray-700/60"),children:s},s)}),(0,a.jsx)("button",{onClick:()=>h(o.page+1),disabled:o.page>=o.pages,className:"px-4 py-2 bg-gray-800/60 text-white rounded-xl hover:bg-gray-700/60 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold",children:"Next"})]})]})]})},i=()=>{var e,t,s,r,i;let[n,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/users/stats"),t=await e.json();o(t)}catch(e){console.error("Error fetching user stats:",e),o({total:0,newThisMonth:0,activeUsers:0,byStatus:[]})}finally{d(!1)}})()},[]),c)return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-700 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/2 mb-4"}),(0,a.jsx)("div",{className:"h-3 bg-gray-700 rounded w-1/3"})]},t))});let x=(null==n||null==(t=n.byStatus)||null==(e=t.find(e=>"inactive"===e.subscription_status))?void 0:e.count)||0,u=[{title:"Total Users",value:(null==n||null==(s=n.total)?void 0:s.toLocaleString())||"0",change:"+12.5%",changeType:"positive",icon:"\uD83D\uDC65"},{title:"New This Month",value:(null==n||null==(r=n.newThisMonth)?void 0:r.toLocaleString())||"0",change:"+8.2%",changeType:"positive",icon:"\uD83C\uDD95"},{title:"Active Users",value:(null==n||null==(i=n.activeUsers)?void 0:i.toLocaleString())||"0",change:"+15.3%",changeType:"positive",icon:"✅"},{title:"Inactive Users",value:x.toLocaleString(),change:"-5.1%",changeType:"negative",icon:"⏸️"}];return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6 hover:border-yellow-400/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm font-medium",children:e.title}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:e.value})]}),(0,a.jsx)("div",{className:"text-3xl",children:e.icon})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat("positive"===e.changeType?"text-green-400":"negative"===e.changeType?"text-red-400":"text-gray-400"),children:e.change}),(0,a.jsx)("span",{className:"text-gray-500 text-sm ml-2",children:"vs last month"})]})]},t))})},n=e=>{let{onFilterChange:t}=e,[s,r]=(0,l.useState)(""),[i,n]=(0,l.useState)("all"),[o,c]=(0,l.useState)("all"),d=(0,l.useCallback)(()=>{t({search:s,status:i,subsTier:o})},[t,s,i,o]);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{d()},500);return()=>clearTimeout(e)},[d]),(0,a.jsx)("div",{className:"bg-gradient-to-br from-gray-900/80 to-gray-900/40 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"\uD83D\uDD0D Search Users"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, email, or username...",value:s,onChange:e=>r(e.target.value),className:"w-full px-4 py-3 bg-gray-800/60 border border-gray-700/50 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20 transition-all"})]}),(0,a.jsxs)("div",{className:"lg:w-52",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"\uD83D\uDCCA Status"}),(0,a.jsxs)("select",{value:i,onChange:e=>n(e.target.value),className:"w-full px-4 py-3 bg-gray-800/60 border border-gray-700/50 rounded-xl text-white focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20 transition-all",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,a.jsxs)("div",{className:"lg:w-52",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"\uD83D\uDC8E Plan"}),(0,a.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 bg-gray-800/60 border border-gray-700/50 rounded-xl text-white focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20 transition-all",children:[(0,a.jsx)("option",{value:"all",children:"All Plans"}),(0,a.jsx)("option",{value:"freemium",children:"Freemium"}),(0,a.jsx)("option",{value:"basic",children:"Basic"}),(0,a.jsx)("option",{value:"professional",children:"Professional"}),(0,a.jsx)("option",{value:"enterprise",children:"Enterprise"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:d,className:"px-6 py-3 bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-black font-bold rounded-xl transition-all duration-200 shadow-lg shadow-yellow-400/30 hover:shadow-yellow-400/50 hover:scale-105",children:"Apply Filters"})})]})})};function o(){let[e,t]=(0,l.useState)({search:"",status:"all",subsTier:"all"});return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-400/20 to-blue-600/20 rounded-3xl blur-xl"}),(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-gray-900/90 to-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center shadow-lg shadow-blue-400/30",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC65"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("h1",{className:"text-4xl font-bold text-white tracking-tight",children:["Users ",(0,a.jsx)("span",{className:"gradient-text",children:"Management"})]})})]}),(0,a.jsx)("p",{className:"text-gray-400 text-lg ml-15",children:"Manage and monitor your app users"})]})]}),(0,a.jsx)(i,{}),(0,a.jsx)(n,{onFilterChange:e=>{t(e)}}),(0,a.jsx)(r,{filters:e})]})}},3647:(e,t,s)=>{Promise.resolve().then(s.bind(s,2516))}},e=>{e.O(0,[441,255,358],()=>e(e.s=3647)),_N_E=e.O()}]);