(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[169],{3204:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(5155),a=t(2115);function l(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)([]),[d,i]=(0,a.useState)(!0),[n,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{c()},[]);let c=async()=>{try{let[e,t]=await Promise.all([fetch("/api/admin/pending"),fetch("/api/admin/users")]);if(e.ok){let t=await e.json();s(t.pendingUsers||[])}if(t.ok){let e=await t.json();l(e.users||[])}}catch(e){console.error("Error fetching data:",e)}finally{i(!1)}},x=async(e,s)=>{o(e);try{let t=await fetch("/api/admin/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,action:s})});if(t.ok)await c();else{let e=await t.json();alert(e.error||"Action failed")}}catch(e){console.error("Error performing action:",e),alert("An error occurred")}finally{o(null)}},p=e=>{let s={admin:"bg-purple-500/20 text-purple-400 border-purple-500/30",developer:"bg-blue-500/20 text-blue-400 border-blue-500/30",support:"bg-green-500/20 text-green-400 border-green-500/30"};return s[e]||s.support};return d?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{className:"shimmer h-32 rounded-2xl"}),(0,r.jsx)("div",{className:"shimmer h-64 rounded-2xl"})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-400/20 to-purple-600/20 rounded-3xl blur-xl"}),(0,r.jsxs)("div",{className:"relative bg-gradient-to-br from-gray-900/90 to-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-400/30",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC51"})}),(0,r.jsx)("div",{children:(0,r.jsxs)("h1",{className:"text-4xl font-bold text-white tracking-tight",children:["Admin ",(0,r.jsx)("span",{className:"gradient-text",children:"Panel"})]})})]}),(0,r.jsx)("p",{className:"text-gray-400 text-lg ml-15",children:"Manage dashboard users and permissions"})]})]}),e.length>0&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-900/80 to-gray-900/40 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-1",children:"Pending Approvals"}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm",children:[e.length," user(s) waiting for approval"]})]}),(0,r.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,r.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-white",children:e.full_name}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-lg text-xs font-bold border ".concat(p(e.role)),children:e.role.toUpperCase()})]}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.email}),(0,r.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:["Requested: ",new Date(e.created_at).toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>x(e.id,"approve"),disabled:n===e.id,className:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg disabled:opacity-50",children:n===e.id?"...":"✓ Approve"}),(0,r.jsx)("button",{onClick:()=>x(e.id,"reject"),disabled:n===e.id,className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg disabled:opacity-50",children:n===e.id?"...":"✕ Reject"})]})]})},e.id))})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-900/80 to-gray-900/40 backdrop-blur-sm border border-gray-800/50 rounded-2xl overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-800/50",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"All Dashboard Users"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Total: ",t.length," users"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-800/60",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"User"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Role"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Last Login"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Created"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-800/50",children:t.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-all duration-200",children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-white",children:e.full_name}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:e.email})]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-lg text-xs font-bold border ".concat(p(e.role)),children:e.role.toUpperCase()})}),(0,r.jsx)("td",{className:"px-6 py-4",children:e.is_approved?(0,r.jsx)("span",{className:"inline-flex px-3 py-1 rounded-lg text-xs font-bold bg-green-500/20 text-green-400",children:"Approved"}):(0,r.jsx)("span",{className:"inline-flex px-3 py-1 rounded-lg text-xs font-bold bg-yellow-500/20 text-yellow-400",children:"Pending"})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300",children:e.last_login?new Date(e.last_login).toLocaleString():"Never"}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})]})]})}},4643:(e,s,t)=>{Promise.resolve().then(t.bind(t,3204))}},e=>{e.O(0,[441,255,358],()=>e(e.s=4643)),_N_E=e.O()}]);